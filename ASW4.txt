========================================= ASW4 =================================================
# configure hostname
hostname ASW4

# protect enable mode with password
enable secret ccna

# configure management ip address on management vlan 10
interface Vlan10
ip address 172.16.2.9 255.255.255.0

# configure default gateway on access switch
ip default-gateway 172.16.2.20

# configure the VLANs and name them
vlan 10
name IT
vlan 20
name FINANCE
vlan 30 
name LEGAL
vlan 40
name CUSTOMER-CARE

# make Trunk interfaces connected to Distribution switches and allow vlan 10,20,30,40
interface range FastEthernet0/1 -2
description ## Trunk interfaces to distribution switches##
switchport trunk allowed vlan 10,20,30,40
switchport mode dynamic desirable

# configure interface fa0/3 connected to DHCP server
interface fa0/3 
description ## CONNECTED TO DHCP SERVER##
switchport access vlan 10
ip dhcp snooping trust
switchport mode access
spanning-tree portfast
spanning-tree bpduguard enable

interface FastEthernet0/4
switchport access vlan 20
switchport mode access
spanning-tree portfast
spanning-tree bpduguard enable

interface FastEthernet0/5
switchport access vlan 30
switchport mode access
spanning-tree portfast
spanning-tree bpduguard enable

# configure DHCP snooping and DAI
ip dhcp snooping
ip dhcp snooping vlan 10,20,30,40
ip arp inspection vlan 10,20,30,40

# configure interfaces connected to Distribution switches as trust for DHCP snooping and DAI
interface range fa0/1-2
ip arp inspection trust
ip dhcp snooping trust

# configure port security on access ports connected to end devices
interface range fa0/3-5
description ## CONNECTED TO SERVERS WITH STATIC IP ADDRESSES##
ip arp inspection trust
ip dhcp snooping trust
switchport port-security
switchport port-security mac-address sticky 
switchport port-security violation restrict

# configure ssh 
ip domain-name production.com
crypto key generate rsa general-keys modulus 2048
username fact secret ccnp
username martin secret ccna
ip access-list standard SSH-MGMT
permit 172.16.2.0 0.0.0.255
deny any
exit
line vty 0 15
login local
transport input ssh
transport output none
access-class SSH-MGMT in
exit
ip ssh version 2
ip ssh time-out 60
ip ssh authentication-retries 2